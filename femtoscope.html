<!DOCTYPE HTML>
<html>

<head>
	<link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100..700&display=swap" rel="stylesheet">
    <link href="femtoscope.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
    <title> ⚡ femtoscope ⚡ </title>
</head>

<body>

    <canvas width=1 height=1 id="graphjs"> </canvas>
    
    <div id="right-click-menu">
        <p> item1 </p>
        <p> item2 </p>
        <p> item3 </p>
    </div>

    <div id="divider"> </div>

    <div id="control-panel" tabindex="-1">
        
        <div class="info-screen">

            <p> 
                femtoscope is meant to be a free alternative to picoscope. <br>
                to make it work, you need a browser that supports serial API <br>
                and a device plugged into a serial port on your pc (usually a usb port). <br>
                This device must measure a voltage at regular intervals and <br>
                send the measured value onto the serial link as a byte (0 is <br>
                the minimum voltage measurable, and 255 the maximum) <br><br>

                use ctrl and shift while scrolling on the graph to zoom in x and y directions only <br><br>

                made by <a href="https://github.com/OscarSaharoy"> oscar saharoy </a>
            </p>
        </div>

        <div id="title-grid"> 

            <h1 style="margin-bottom: 1rem;"> femto<strong>scope</strong> </h1>

            <div class="play-button">
                <div class="play-triangle"> </div>
                <div class="play-square"> </div>
                <div class="play-white"> </div>
            </div>

            <div class="info-button">
                <div class="i-back"> </div>
                <div class="i-body"> </div>
                <div class="i-dot"> </div>
            </div>

        </div>

        <button id="connect"> connect to serial 🔌 </button>

        <button id="fft"> show frequency spectrum 🎵 </button>

        <button id="fit-data"> fit to data 📈 </button>
	    
	    <select id="triggering">
        	<option value="0"> none </option>
        	<option value="1"> single </option>
        	<option value="2"> repeat </option>
        </select>

        <p id="triggering-text"> triggering 🔫 </p>
        
        <div class="stats">

        	<h2 class="header"> waveform info </h2>
            
            <p class="left"> frequency</p>
            <p class="right" id="frequency-stat"> - </p>
            
            <p class="left"> peak to peak </p>
            <p class="right" id="peak-to-peak-stat"> - </p>
            
            <p class="left"> rms </p>
            <p class="right" id="rms-stat"> - </p>
            
            <p class="left"> dc average </p>
            <p class="right" id="dc-average-stat"> - </p>

            <p class="left"> max </p>
            <p class="right" id="max-stat"> - </p>

            <p class="left"> min </p>
            <p class="right" id="min-stat"> - </p>

        </div>

        <button id="add-ruler"> add ruler 📏 </button>

        <div class="stats">

        	<h2 style="grid-column-start: 1; grid-column-end: 4; margin-bottom: 0.3rem;"> ruler info </h2>

            <p class="left"> dy </p>
            <p class="right" id="dy-stat"> - </p>

            <p class="left"> dx </p>
            <p class="right" id="dx-stat"> - </p>

            <p class="left"> gradient </p>
            <p class="right" id="gradient-stat"> - </p>

            <p class="left"> length </p>
            <p class="right" id="length-stat"> - </p>

            <p class="left"> start </p>
            <p class="right" id="start-stat"> - </p>

            <p class="left"> end </p>
            <p class="right" id="end-stat"> - </p>

        </div>

        <div id="settings">

            <h2 class="header"> sampling settings </h2>

            <p class="left"> sample count </p>
            <input class="right" id="sample-count" style="grid-column-start: 2; grid-column-end: 5;" type="number" value="2048"> </input>
            
            <p class="left"> voltage range </p>	
            <!-- <p> sample rate </p> -->

            <input id="voltage-range-min" style="grid-column: 2;" type="number" value="0"> </input>
            <p style="grid-column: 3;"> - </p>
            <input id="voltage-range-max" style="grid-column: 4;" type="number" value="3.3"> </input>
            <!-- <p id="sample-rate" style="grid-column-start: 1; grid-column-end: 4;"> - </p> -->
        </div>
    
    </div>

    <div id="no-serial">

        <p> serial API is not enabled on this browser. to enable it: <br><br>

                make sure you're using an updated version of chrome <br>
                type "chrome://flags" into your search bar <br>
                search for and enable the following flag: #enable-experimental-web-platform-features
        </p>

        <button id="no-serial-continue"> continue </button>

        <script type="text/javascript" src="scripts/noserialwarning.js"> </script>
    </div>

    <script type="text/javascript" src="../graph.js/vec2.js"> </script>
    <script type="text/javascript" src="../graph.js/graph.js"> </script>
    <script type="text/javascript" src="../minfft.js/minfft.js"> </script>

    <script type="text/javascript" src="scripts/stats.js"> </script>
    <script type="text/javascript" src="scripts/triggering.js"> </script>
    <script type="text/javascript" src="scripts/serialconnection.js"> </script>
    <script type="text/javascript" src="scripts/ruler.js"> </script>
    <script type="text/javascript" src="scripts/dividermanager.js"> </script>
    <script type="text/javascript" src="scripts/buttons.js"> </script>       
    <script type="text/javascript" src="scripts/rightclickmenu.js"> </script>       
    <script type="text/javascript" src="scripts/femtoscope.js"> </script>
</body>

</html>